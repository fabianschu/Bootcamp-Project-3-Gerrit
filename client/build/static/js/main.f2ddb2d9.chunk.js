(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},117:function(e,t,a){},146:function(e,t){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(32),c=a.n(o),l=(a(89),a(6)),s=a(20),u=(a(48),a(49),a(1)),i=a(12),m=a.n(i),p=a(153),g=a(154),b=a(152);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var d=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),d=i[0],E=i[1],h=function(e){c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,Object(u.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement(p.a,{onSubmit:function(t){var a,n;t.preventDefault(),(a=o.username,n=o.password,m.a.post("/auth/login",{username:a,password:n}).then((function(e){return e.data})).catch((function(e){return e.response.data}))).then((function(t){t.message?(E(t.message),console.log(t.message)):(e.setUser(t),e.history.push("/chat"))}))}},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(p.a.Control,{type:"text",name:"username",id:"username",value:e.username,onChange:h})),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(p.a.Control,{type:"password",name:"password",id:"password",value:e.password,onChange:h})),d&&r.a.createElement(g.a,{variant:"danger"},d),r.a.createElement(b.a,{type:"submit"},"Log in")))};function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var h=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),f=i[0],d=i[1],h=function(e){c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,Object(u.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Sign up"),r.a.createElement(p.a,{onSubmit:function(t){var a,n;t.preventDefault(),(a=o.username,n=o.password,m.a.post("/auth/signup",{username:a,password:n}).then((function(e){return e.data})).catch((function(e){return e.response.data}))).then((function(t){t.message?d(t.message):(e.setUser(t),e.history.push("/chat"))}))}},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(p.a.Control,{type:"text",name:"username",id:"username",value:e.username,onChange:h})),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(p.a.Control,{type:"password",name:"password",id:"password",value:e.password,onChange:h})),f&&r.a.createElement(g.a,{variant:"danger"},f),r.a.createElement(b.a,{type:"submit"},"Sign up")))},O=(a(110),function(e){return r.a.createElement("button",{className:"toggle-button",onClick:e.click},r.a.createElement("div",{className:"toggle-button__line"}),r.a.createElement("div",{className:"toggle-button__line"}),r.a.createElement("div",{className:"toggle-button__line"}))}),v=(a(111),function(e){return r.a.createElement("header",{className:"toolbar"},r.a.createElement("nav",{className:"toolbar__navigation"},r.a.createElement("div",{className:"toolbar__logo"},r.a.createElement("a",{href:"/"},"Gerrit")),r.a.createElement("div",{className:"toolbar__toggle-button"},r.a.createElement(O,{click:e.drawerClickHandler})),r.a.createElement("div",{className:"toolbar_navigation-items"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Products")),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Users"))))))}),j=a(16),w=(a(112),function(e){var t="side-drawer";return e.show&&(t="side-drawer open"),r.a.createElement("nav",{className:t},e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/profile"},"Profile "),r.a.createElement(j.b,{to:"/"},"Chat "),r.a.createElement(j.b,{to:"/"},"Map "),r.a.createElement(j.b,{to:"/",onClick:function(){m.a.delete("/auth/logout"),console.log("props",e),e.clearUser(null)}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/signup"},"Signup "),r.a.createElement(j.b,{to:"/login"},"Login ")))}),y=(a(117),function(e){return r.a.createElement("div",{className:"backdrop",onClick:e.click})}),k=function(e){console.log("navbar",e);var t,a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],s=o[1];return c&&(t=r.a.createElement(y,{click:function(e){s(!1)}})),r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(v,{drawerClickHandler:function(e){s(!c)}}),r.a.createElement(w,{show:c,user:e.user,clearUser:e.clearUser}),t,r.a.createElement("main",{style:{marginTop:"64px"}}))},S=function(e){var t=Object(n.useState)({quote:""}),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),i=u[0],g=u[1],f=Object(n.useState)(""),d=Object(l.a)(f,2),E=d[0],h=d[1];console.log(e.user);var O=e.user.created_at;Object(n.useEffect)((function(){console.log("did mount"),m.a.get("/profile").then((function(e){console.log(e.data),c(e.data)})).catch((function(e){404===e.response.status&&console.log(e)}))}),[]),Object(n.useEffect)((function(){console.log("Quote is being changed")}),[E]),Object(n.useEffect)((function(){console.log("mounted or updated")}),[]),Object(n.useEffect)((function(){return function(){console.log("unmount")}}),[]);return console.log(o),r.a.createElement("div",null,r.a.createElement("h1",null,"Profile page"),r.a.createElement("h2",null,e.user.username),r.a.createElement("h2",null,"gerriting since"," ",O.slice(8,10)+"-"+O.slice(5,7)+"-"+O.slice(0,4)),o.quote&&r.a.createElement("h5",null,o.quote),r.a.createElement("button",{onClick:function(){g(!i)}},"Edit profile"),r.a.createElement(p.a,{onSubmit:function(e){e.preventDefault(),console.log("quote",{quote:E}),m.a.put("/profile",{quote:E}).then((function(e){c(e.data),h(e.data.quote),console.log("resssssssssssss",e.data)})).catch((function(e){console.log(e)}))}},r.a.createElement("h2",null,"Edit Profile"),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,{htmlFor:"quote"},"Quote: "),r.a.createElement(p.a.Control,{type:"text",name:"description",value:E,onChange:function(e){h(e.target.value)}})),r.a.createElement(b.a,{type:"submit"},"Edit")))},C=a(80),P=function(){var e=Object(n.useState)({viewport:{width:400,height:600,longitude:13.410824,latitude:52.503441,zoom:13}}),t=Object(l.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",{className:"mapContainer"},r.a.createElement("h1",{id:"mapHeader"},"All live walls"),r.a.createElement("div",{className:"map"},r.a.createElement(C.a,Object.assign({mapboxApiAccessToken:"pk.eyJ1IjoiYXJlc2FuIiwiYSI6ImNrM3UzYWxjbzAyYWMzbHRkYThjeGU3ODMifQ.uMuoyhCcGP0EXyd_f-oS0g"},a.viewport,{onViewportChange:function(e){return o({viewport:e})}}))))},x=a(79),_=function(e){console.log(e.user),console.log(e.message);var t=e.message,a=t.username,n=t.content,o=t.created_at,c=t.userId;o=o.slice(11,16);return r.a.createElement("div",{style:e.user._id===c?{border:"1px solid black",backgroundColor:"yellow",margin:"10px 0 10px 0",width:"80vw"}:{border:"1px solid black",backgroundColor:"white",margin:"10px 0 10px 0",width:"80vw"}},r.a.createElement("p",null,"Username: ",a),r.a.createElement("p",null,"Message: ",n),r.a.createElement("p",null,"Time: ",o))},N=a.n(x)()("http://localhost:5555"),U=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),i=u[0],p=u[1],g=Object(n.useState)([]),b=Object(l.a)(g,2),f=b[0],d=b[1];Object(n.useEffect)((function(){p(e.user),m.a.get("/chat").then((function(e){console.log(e.data),d(e.data)})).catch((function(e){return console.log(e)})),N.on("message",(function(e){m.a.get("/chat").then((function(e){console.log(e.data),d(e.data)})).catch((function(e){return console.log(e)}))}))}),[]);return r.a.createElement("div",{style:{backgroundColor:"pink"}},r.a.createElement("h1",null,"Chatroom"),r.a.createElement("div",null,f.map((function(e,t){return r.a.createElement(_,{user:i,message:e,key:t})}))),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m.a.post("/chat",{message:o,user:i}).then((function(){return N.emit("message",o)})).catch((function(e){return console.log(e)})),c("")}},r.a.createElement("input",{type:"text",name:"input",value:o,placeholder:"Type something here..",onChange:function(e){c(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Submit")))},D=function(e){var t=Object(n.useState)(e.user),a=Object(l.a)(t,2),o=a[0],c=a[1];return r.a.createElement("div",{className:"App"},r.a.createElement(k,{user:o,clearUser:c}),r.a.createElement(s.b,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(h,Object.assign({},e,{setUser:c}))}}),r.a.createElement(s.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(d,Object.assign({},e,{setUser:c}))}}),r.a.createElement(s.b,{exact:!0,path:"/map"},r.a.createElement(P,null)),r.a.createElement(k,{user:o,clearUser:c}),r.a.createElement(s.b,{exact:!0,path:"/chat",render:function(e){return o?r.a.createElement(U,Object.assign({},e,{user:o})):r.a.createElement(s.a,{to:"/"})}}),r.a.createElement(s.b,{exact:!0,path:"/profile",render:function(e){return o?r.a.createElement(S,Object.assign({},e,{user:o})):r.a.createElement(s.a,{to:"/"})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(149);m.a.get("/auth/loggedin").then((function(e){var t=e.data;console.log(t),c.a.render(r.a.createElement(j.a,null,r.a.createElement(D,{user:t})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},48:function(e,t,a){},84:function(e,t,a){e.exports=a(150)},89:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.f2ddb2d9.chunk.js.map